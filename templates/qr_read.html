<!DOCTYPE html>
<html>
<header>
    <script src="https://raw.githubusercontent.com/mebjas/html5-qrcode/master/minified/html5-qrcode.min.js"></script>
    <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>

    <script>
    import {Html5QrcodeScanner} from "html5-qrcode";
    import {Html5Qrcode} from "html5-qrcode"
    </script> 


</header>


<body>

    <script>
        // This method will trigger user permissions 
        Html5Qrcode.getCameras().then(cameras => {
          /**
            * devices would be an array of objects of type:
            * { id: "id", label: "label" }
           */
           if (devices && devices.length) {
               var cameraId = devices[0].id;
                // .. use this to start scanning.
            }
       }).catch(err => {
            // handle err   
    });
    
    const html5QrCode = new Html5Qrcode("reader");
    html5QrCode.start(
       cameraId, // retreived in the previous step.
       {
          fps: 10,    // sets the framerate to 10 frame per second 
          qrbox: 250  // sets only 250 X 250 region of viewfinder to
                      // scannable, rest shaded.
     },
     qrCodeMessage => {
         // do something when code is read. For example:
         console.log(`QR Code detected: ${qrCodeMessage}`);
     },
     errorMessage => {
         // parse error, ideally ignore it. For example:
         console.log(`QR Code no longer in front of camera.`);
     })
     .catch(err => {
         // Start failed, handle it. For example, 
         console.log(`Unable to start scanning, error: ${err}`);
     });
    </script>
    
    <input id="reader" type="file" accept="image/*;capture=camera">

</body>



<!-- <div id=formgate>
    <form action = "/adminapp/createGate" method="POST">
        Gate Id: 
        <textarea id="id" name="id" rows="1" cols="12">
        </textarea>

        <p>Gate Secret:</p>
        <textarea id="secret" name="secret" rows="1" cols="12">
        </textarea>
        <p> press the submit button to store the gate on the server</p>
     <input type="submit">
    </form>
</div> -->
</html>